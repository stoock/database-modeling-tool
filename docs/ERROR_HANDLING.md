# ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œ

## ê°œìš”

í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ ì¼ê´€ëœ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.

## ì•„í‚¤í…ì²˜

### ë°±ì—”ë“œ (Spring Boot)

**ê³„ì¸µë³„ ì±…ì„**
- `HealthController`: ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì—”ë“œí¬ì¸íŠ¸
- `DatabaseConnectionChecker`: ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê²€ì¦
- `GlobalExceptionHandler`: ëª¨ë“  ì˜ˆì™¸ë¥¼ í‘œì¤€ í˜•ì‹ìœ¼ë¡œ ë³€í™˜

**ì‘ë‹µ í˜•ì‹**
```json
{
  "error": {
    "message": "ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€",
    "code": "ERROR_CODE",
    "details": {
      "field1": ["ì˜¤ë¥˜ ë©”ì‹œì§€ 1", "ì˜¤ë¥˜ ë©”ì‹œì§€ 2"]
    }
  }
}
```

### í”„ë¡ íŠ¸ì—”ë“œ (React)

**ì¤‘ì•™ ì§‘ì¤‘ì‹ ì—ëŸ¬ í•¸ë“¤ëŸ¬**

ìœ„ì¹˜: `frontend/src/lib/errorHandler.ts`

**ì£¼ìš” ê¸°ëŠ¥**
- Axios ì—ëŸ¬ë¥¼ `ErrorInfo` ê°ì²´ë¡œ ë³€í™˜
- HTTP ìƒíƒœ ì½”ë“œë³„ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ ì œê³µ
- ì—ëŸ¬ íƒ€ì… ë¶„ë¥˜ (NETWORK, SERVER, VALIDATION, etc.)
- ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
- ê°œë°œ í™˜ê²½ì—ì„œ ìƒì„¸ ë¡œê¹…

## ì—ëŸ¬ íƒ€ì… ë¶„ë¥˜

```typescript
ErrorType.NETWORK    // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨ (ë°±ì—”ë“œ ì„œë²„ ë¯¸ì‹¤í–‰)
ErrorType.SERVER     // ì„œë²„ ì˜¤ë¥˜ (500, 502, 503)
ErrorType.TIMEOUT    // ìš”ì²­ ì‹œê°„ ì´ˆê³¼ (504)
ErrorType.VALIDATION // ì…ë ¥ ë°ì´í„° ê²€ì¦ ì‹¤íŒ¨ (400, 422)
ErrorType.NOT_FOUND  // ë¦¬ì†ŒìŠ¤ ì—†ìŒ (404)
ErrorType.CONFLICT   // ë°ì´í„° ì¶©ëŒ (409)
ErrorType.UNAUTHORIZED // ì¸ì¦ í•„ìš” (401)
ErrorType.FORBIDDEN  // ì ‘ê·¼ ê±°ë¶€ (403)
ErrorType.UNKNOWN    // ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜
```

## HTTP ìƒíƒœ ì½”ë“œë³„ ì²˜ë¦¬

### 503 Service Unavailable (ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨)

**ë°±ì—”ë“œ ì‘ë‹µ**
```json
{
  "status": "DEGRADED",
  "database": "DOWN",
  "message": "PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Docker ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.",
  "hint": "ì‹¤í–‰ ëª…ë ¹: docker-compose up -d ë˜ëŠ” .\\scripts\\01-env-setup.ps1"
}
```

**í”„ë¡ íŠ¸ì—”ë“œ ë©”ì‹œì§€**
```
ì„œë¹„ìŠ¤ ì´ìš© ë¶ˆê°€
ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. PostgreSQLì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
```

**í•´ê²° ë°©ë²•**
1. `docker ps`ë¡œ PostgreSQL ì»¨í…Œì´ë„ˆ í™•ì¸
2. `docker-compose up -d` ë˜ëŠ” `.\scripts\01-env-setup.ps1` ì‹¤í–‰
3. `.\scripts\03-health-check.ps1`ë¡œ ìƒíƒœ í™•ì¸

### ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ (ë°±ì—”ë“œ ì„œë²„ ë¯¸ì‹¤í–‰)

**í”„ë¡ íŠ¸ì—”ë“œ ë©”ì‹œì§€**
```
ì„œë²„ ì—°ê²° ì‹¤íŒ¨
ë°±ì—”ë“œ ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. (http://localhost:8080)
```

**í•´ê²° ë°©ë²•**
1. `cd backend && ./gradlew bootRunDev` ì‹¤í–‰
2. `netstat -ano | findstr :8080`ìœ¼ë¡œ í¬íŠ¸ í™•ì¸

### 400 Bad Request / 422 Unprocessable Entity (ê²€ì¦ ì‹¤íŒ¨)

**ë°±ì—”ë“œ ì‘ë‹µ**
```json
{
  "error": {
    "message": "ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
    "code": "VALIDATION_ERROR",
    "details": {
      "name": ["ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤", "ì´ë¦„ì€ 255ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"],
      "email": ["ìœ íš¨í•œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"]
    }
  }
}
```

**í”„ë¡ íŠ¸ì—”ë“œ ì²˜ë¦¬**
- í•„ë“œë³„ ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
- í•´ë‹¹ í•„ë“œì— ë¹¨ê°„ìƒ‰ í…Œë‘ë¦¬ í‘œì‹œ
- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¡œ ì „ì²´ ìš”ì•½ í‘œì‹œ

### 404 Not Found (ë¦¬ì†ŒìŠ¤ ì—†ìŒ)

**í”„ë¡ íŠ¸ì—”ë“œ ë©”ì‹œì§€**
```
ë¦¬ì†ŒìŠ¤ ì—†ìŒ
ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
```

### 500 Internal Server Error (ì„œë²„ ì˜¤ë¥˜)

**í”„ë¡ íŠ¸ì—”ë“œ ë©”ì‹œì§€**
```
ì„œë²„ ì˜¤ë¥˜
ì„œë²„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤

ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
```

## ì‚¬ìš©ì í”¼ë“œë°± ì‹œìŠ¤í…œ

### í† ìŠ¤íŠ¸ ë©”ì‹œì§€

**ìœ„ì¹˜**: `frontend/src/stores/toastStore.ts`

**íƒ€ì…ë³„ ìƒ‰ìƒ**
- ğŸ”´ ì—ëŸ¬ (error): ë¹¨ê°„ìƒ‰
- âš ï¸ ê²½ê³  (warning): ë…¸ë€ìƒ‰
- âœ… ì„±ê³µ (success): ì´ˆë¡ìƒ‰
- â„¹ï¸ ì •ë³´ (info): íŒŒë€ìƒ‰

**í‘œì‹œ ì‹œê°„**
- ì—ëŸ¬: 5ì´ˆ
- ê²½ê³ : 4ì´ˆ
- ì„±ê³µ: 3ì´ˆ
- ì •ë³´: 3ì´ˆ

### ì¸ë¼ì¸ ì—ëŸ¬ í‘œì‹œ

- ì…ë ¥ í•„ë“œ í•˜ë‹¨ì— ë¹¨ê°„ìƒ‰ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ
- í•„ë“œ í…Œë‘ë¦¬ë¥¼ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ê°•ì¡°
- ì•„ì´ì½˜ìœ¼ë¡œ ì‹œê°ì  í”¼ë“œë°± ì œê³µ

## ì¬ì‹œë„ ë¡œì§

**ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬**
- `ErrorType.NETWORK`: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨
- `ErrorType.TIMEOUT`: ìš”ì²­ ì‹œê°„ ì´ˆê³¼
- `ErrorType.SERVER`: ì„œë²„ ì˜¤ë¥˜ (500, 502, 503)

**ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬**
- `ErrorType.VALIDATION`: ê²€ì¦ ì‹¤íŒ¨ (ì‚¬ìš©ì ìˆ˜ì • í•„ìš”)
- `ErrorType.NOT_FOUND`: ë¦¬ì†ŒìŠ¤ ì—†ìŒ
- `ErrorType.CONFLICT`: ë°ì´í„° ì¶©ëŒ
- `ErrorType.UNAUTHORIZED`: ì¸ì¦ í•„ìš”
- `ErrorType.FORBIDDEN`: ì ‘ê·¼ ê±°ë¶€

## ê°œë°œ í™˜ê²½ ë¡œê¹…

ê°œë°œ í™˜ê²½(`import.meta.env.DEV`)ì—ì„œëŠ” ì½˜ì†”ì— ìƒì„¸ ì—ëŸ¬ ì •ë³´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

```javascript
ğŸ”´ ì„œë¹„ìŠ¤ ì´ìš© ë¶ˆê°€
Message: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. PostgreSQLì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
Type: SERVER
Status Code: 503
Original Error: AxiosError {...}
```

## ëª¨ë²” ì‚¬ë¡€

### ë°±ì—”ë“œ

1. **ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€**: ì‚¬ìš©ìê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ë¡œ ì‘ì„±
2. **í•´ê²° ë°©ë²• ì œì‹œ**: ê°€ëŠ¥í•œ ê²½ìš° hint í•„ë“œì— í•´ê²° ë°©ë²• í¬í•¨
3. **ì¼ê´€ëœ í˜•ì‹**: GlobalExceptionHandlerë¥¼ í†µí•œ í‘œì¤€í™”ëœ ì‘ë‹µ
4. **ì ì ˆí•œ ìƒíƒœ ì½”ë“œ**: HTTP í‘œì¤€ì„ ì¤€ìˆ˜í•œ ìƒíƒœ ì½”ë“œ ì‚¬ìš©

### í”„ë¡ íŠ¸ì—”ë“œ

1. **ì¤‘ì•™ ì§‘ì¤‘ì‹ ì²˜ë¦¬**: errorHandler.tsë¥¼ í†µí•œ ì¼ê´€ëœ ì—ëŸ¬ ì²˜ë¦¬
2. **ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€**: ê¸°ìˆ  ìš©ì–´ ëŒ€ì‹  ì´í•´í•˜ê¸° ì‰¬ìš´ í‘œí˜„ ì‚¬ìš©
3. **ì‹œê°ì  í”¼ë“œë°±**: í† ìŠ¤íŠ¸ + ì¸ë¼ì¸ ë©”ì‹œì§€ë¡œ ë‹¤ì¸µ í”¼ë“œï¿½ï¿½ï¿½
4. **ì¬ì‹œë„ ì•ˆë‚´**: ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ì— ìë™ìœ¼ë¡œ ì•ˆë‚´ ì¶”ê°€
5. **ë¡œê¹…**: ê°œë°œ í™˜ê²½ì—ì„œ ë””ë²„ê¹…ì„ ìœ„í•œ ìƒì„¸ ë¡œê·¸

## í…ŒìŠ¤íŠ¸

### ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸

```java
@Test
void healthCheck_DatabaseDown_Returns503() throws Exception {
    // Given: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨ ìƒí™©
    
    // When & Then
    mockMvc.perform(get("/api/health"))
        .andExpect(status().isServiceUnavailable())
        .andExpect(jsonPath("$.status").value("DEGRADED"))
        .andExpect(jsonPath("$.database").value("DOWN"));
}
```

### í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸

```typescript
describe('errorHandler', () => {
  it('503 ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒŒì‹±í•œë‹¤', () => {
    const axiosError = new AxiosError();
    axiosError.response = {
      status: 503,
      data: {},
    };
    
    const errorInfo = parseAxiosError(axiosError);
    
    expect(errorInfo.type).toBe(ErrorType.SERVER);
    expect(errorInfo.message).toContain('PostgreSQL');
  });
});
```

## ì°¸ê³  ë¬¸ì„œ

- [DATABASE_CONNECTION_ERROR.md](DATABASE_CONNECTION_ERROR.md) - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜ ìƒì„¸ ê°€ì´ë“œ
- [DEVELOPMENT.md](../DEVELOPMENT.md) - ê°œë°œ ê°€ì´ë“œ
- [API.md](../API.md) - API ëª…ì„¸

